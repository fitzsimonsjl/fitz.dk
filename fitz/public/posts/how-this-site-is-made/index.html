<!DOCTYPE html>
<html lang="en-US" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>How This Site Is Made - Hugo, GitHub Pages, and GitHub Actions | Mainframes... and more</title>

    <link rel="stylesheet" href="/css/main.css">


</head>
<body>
  <header>
    <a href="/" class="title">
  <h2>Mainframes... and more</h2>
</a>
<nav>
<a href="/">Home</a>

<a href="/posts/">Posts</a>

<a href="/talks/">Talks</a>

</nav>

  </header>
  <main>
    
  <h1>How This Site Is Made - Hugo, GitHub Pages, and GitHub Actions</h1>

  
  
  
  10 Apr 2023
  <p>1011 words | Estimated reading time: 5 minutes </p>
  
  <h2 id="what-exactly-is-a-static-site-generator-ssg">What exactly is a Static Site Generator (SSG)?</h2>
<p>A Static Site Generator takes content you give it (text, images and so on) and builds this all as standard HTML. What this means is that the content does not change and is shown to the user exactly the same way every single time.</p>
<p>For websites that are primarily text based (such as blogs), this can be useful. It means that the site is quick to load for visitors, quick to develop/build, and very easy to maintain. All you need to really do is provide the text after you&rsquo;ve done the initial setup.</p>
<h2 id="getting-started-with-hugo">Getting started with Hugo</h2>
<p>To get started with Hugo, head over to the <a href="https://gohugo.io/getting-started/quick-start/">Quick Start</a> guide which will walk you through getting up and running in about 10 minutes.</p>
<p>The main things to do are:</p>
<ul>
<li>Install Hugo (depending on the OS you&rsquo;re using, this may vary somewhat)</li>
<li>Make sure Git is installed (if you&rsquo;re new to Git/need to set up an SSH key, you can find a good guide here: <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent">Generating a new SSH Key</a>)</li>
<li>Log into your GitHub account. If you don&rsquo;t have one, head over to <a href="https://github.com">GitHub</a> and sign up for one.</li>
<li>Pick your Hugo theme that you want to use for your site (visit <a href="https://themes.gohugo.io/">Hugo Themes</a> to see all themes available and for instructions on how to add it to your site)</li>
</ul>
<h2 id="but-where-will-my-hugo-site-live">But where will my Hugo site live?</h2>
<p>If you&rsquo;ve followed all the steps up until now, you have a Hugo site created (and hopefully, some basic content). But, for now, it only lives in the Git repository that you&rsquo;re storing it in and it isn&rsquo;t hosted anywhere. For hosting, you&rsquo;ve got plenty of options:</p>
<ul>
<li>GitHub Pages (probably the easiest)</li>
<li>Netlify</li>
<li>An AWS Amplify instance</li>
<li>An Azure Static Web App instance</li>
</ul>
<p>Personally, unless there&rsquo;s a specific reason for hosting it elsewhere, I&rsquo;d recommend GitHub Pages. Mainly because you&rsquo;ll already have a GitHub account created as part of the earlier steps (you can&rsquo;t add an SSH Key to a non-existant GitHub account), and also because it won&rsquo;t cost anything at all unless you want to set it up with your own domain so you can have yourname.com as the URL.</p>
<h2 id="getting-hugo-set-up-with-github-pages">Getting Hugo set up with GitHub Pages</h2>
<p>Since you already have a Git repository where you have your site stored, all you have to do to get it hosted on GitHub is turn on the GitHub pages option and select &ldquo;GitHub Actions&rdquo; as the source. Once that&rsquo;s done, head back to your code editor for the next section&hellip;</p>
<h2 id="pulling-it-all-together-with-github-actions">Pulling it all together with GitHub Actions</h2>
<p>Why don&rsquo;t we we make our lives a little easier and automate the entire process? Instead of having to remove our &ldquo;public&rdquo; folder before uploading new content or manually building our site to be deployed, what if all we had to do was write the content we wanted to add and have our site automatically build itself and publish as soon as we <code>git push</code> our changes? Let&rsquo;s do that now&hellip;</p>
<p>In your code editor, create a new folder called <code>.github</code> (the . in front of the folder name denotes that it&rsquo;s a hiden folder) and then a subfolder called <code>workflows</code>. In the <code>workflows</code> folder, create a new file called <code>pages.yaml</code></p>
<p>Once you&rsquo;ve got your yaml file created, paste in the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">name</span>: <span style="color:#ae81ff">Deploy Hugo SSG to GH Pages</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># When the action should run. Here we specify it should run on push to main branch.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># We also allow for manually running the action with the empty &#34;workflow_dispatch&#34;.</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">on</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">push</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">branches</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">master</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">workflow_dispatch</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Set the needed permissions.</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">permissions</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">contents</span>: <span style="color:#ae81ff">read</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">pages</span>: <span style="color:#ae81ff">write</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">id-token</span>: <span style="color:#ae81ff">write</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Cancel running deployments if a new one is issued - avoids any conflicts or overwriting content.</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">concurrency</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">group</span>: <span style="color:#ae81ff">pages</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">cancel-in-progress</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">jobs</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">build</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">runs-on</span>: <span style="color:#ae81ff">ubuntu-latest</span> <span style="color:#75715e"># Always pulls latest version of Ubuntu runner.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">steps</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Checkout</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">actions/checkout@v4</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">with</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">submodules</span>: <span style="color:#66d9ef">true</span> <span style="color:#75715e"># Ensures that our theme is always the latest stable version.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Setting up Hugo</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">peaceiris/actions-hugo@v2</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">with</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">hugo-version</span>: <span style="color:#e6db74">&#34;latest&#34;</span> <span style="color:#75715e"># Always pulls latest version of Hugo.</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">extended</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Remove public dir</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">run</span>: <span style="color:#ae81ff">rm -rf public</span> <span style="color:#75715e"># Delete the public directory (our published output folder - ./public) before build so stale content is not kept.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Setting up Pages</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">id</span>: <span style="color:#ae81ff">pages</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">actions/configure-pages@v4</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Build</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">run</span>: <span style="color:#ae81ff">hugo --baseURL &#34;${{ steps.pages.outputs.base_url }}/&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Upload artifact</span> <span style="color:#75715e"># Here we are able to view the contents of our site at the time of deploy - it will be kept for a short while before deletion.</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">actions/upload-pages-artifact@v4</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">with</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">path</span>: <span style="color:#ae81ff">./public</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">deploy</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">environment</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">name</span>: <span style="color:#ae81ff">github-pages</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">url</span>: <span style="color:#ae81ff">${{ steps.deployment.outputs.page_url }}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">runs-on</span>: <span style="color:#ae81ff">ubuntu-latest</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">needs</span>: <span style="color:#ae81ff">build</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">steps</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Deploy build to GH Pages</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">id</span>: <span style="color:#ae81ff">deployment</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">actions/deploy-pages@v4</span>
</span></span></code></pre></div><p>The above script tells GitHub that we have created an action called &ldquo;Deploy Hugo SSG to GH Pages&rdquo; and does the following in order:</p>
<ul>
<li>The action will automatically run any time a <code>git push</code> happens once we&rsquo;ve updated some content on our site.</li>
<li>We set the necessary read/write permissions we need in our site repository.</li>
<li>With concurency we make sure that if multiple people are working on the site and both push changes at the same time one does not overwrite the other or that there is some kind of conflict.</li>
<li>We build our site using the latest version of Ubuntu and pull down the latest version of Hugo.</li>
<li>We delete the <code>./public directory</code> before we build our site for deployment so that the latest content is published. If we have existing files in the public folder without removing it, our content might not show up depending on how it&rsquo;s named/what it is.</li>
<li>We set up GitHub Pages and buld our site.</li>
<li>The site gets deployed onto GitHub Pages as a fresh copy.</li>
</ul>
<p>That&rsquo;s it! Now all you have to focus on is the writing itself, and when you want to publish new content, just push your changes to GitHub and let the GitHub Action we set up handle the rest. A few minutes later and your site will be live with your new content.</p>

  
  <h6 class="reply-via-email"><a href="mailto:blog@fitz.dk?subject=Re:%20How%20This%20Site%20Is%20Made%20-%20Hugo%2c%20GitHub%20Pages%2c%20and%20GitHub%20Actions">Reply via email</a></h6>
  
  


  </main>
  <footer>
    

  </footer>
</body>
</html>
